{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _classCallCheck from\"/Users/stephenthomas/Desktop/HabitTrackerReact/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/stephenthomas/Desktop/HabitTrackerReact/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/stephenthomas/Desktop/HabitTrackerReact/client/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/stephenthomas/Desktop/HabitTrackerReact/client/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/stephenthomas/Desktop/HabitTrackerReact/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import'./Auth.css';import GoogleButton from'react-google-button';import{GoogleLogin,GoogleLogout}from'react-google-login';import{withRouter}from'react-router-dom';// refresh token\n//import { refreshTokenSetup } from '../utils/refreshToken';\nvar CLIENT_ID='931153056282-750tm4j5ehreopjf5db02huk0v4gg3ac.apps.googleusercontent.com';var Auth=/*#__PURE__*/function(_Component){_inherits(Auth,_Component);var _super=_createSuper(Auth);function Auth(props){var _this;_classCallCheck(this,Auth);_this=_super.call(this,props);_this.state={isLogined:false,email:undefined};_this.login=_this.login.bind(_assertThisInitialized(_this));_this.handleLoginFailure=_this.handleLoginFailure.bind(_assertThisInitialized(_this));_this.logout=_this.logout.bind(_assertThisInitialized(_this));_this.handleLogoutFailure=_this.handleLogoutFailure.bind(_assertThisInitialized(_this));return _this;}_createClass(Auth,[{key:\"login\",value:function login(response){var _this2=this;if(response.accessToken){this.setState(function(state){return{isLogined:true,email:response.profileObj.email};});}console.log(response.profileObj.email);var data={email:response.profileObj.email};fetch('http://127.0.0.1:5000/api/google',{crossDomain:true,mode:'cors',method:'POST',headers:{'Content-Type':'application/json','Accept':'application/json'},body:JSON.stringify(data)}).then(function(response){return response.json();}).then(function(data){console.log('Success',data);if(data.message===true){window.alert(\"Failed Creating your account \");}else{_this2.props.setEmail(_this2.state.email);_this2.props.history.push('/email');}});}},{key:\"logout\",value:function logout(response){this.setState(function(state){return{isLogined:false,email:undefined};});}},{key:\"handleLoginFailure\",value:function handleLoginFailure(response){alert('Failed to log in');}},{key:\"handleLogoutFailure\",value:function handleLogoutFailure(response){alert('Failed to log out');}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{children:[this.state.isLogined?/*#__PURE__*/_jsx(GoogleLogout,{clientId:CLIENT_ID,buttonText:\"Logout\",onLogoutSuccess:this.logout,onFailure:this.handleLogoutFailure}):/*#__PURE__*/_jsx(GoogleLogin,{clientId:CLIENT_ID,buttonText:\"Login\",onSuccess:this.login,onFailure:this.handleLoginFailure,cookiePolicy:'single_host_origin',responseType:\"code,token\"}),this.state.email?/*#__PURE__*/_jsxs(\"h5\",{children:[\"Your Email is:  \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" \",this.state.email,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" Your password is: \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),\" google\"]}):null]});}}]);return Auth;}(Component);export default withRouter(Auth);","map":{"version":3,"sources":["/Users/stephenthomas/Desktop/HabitTrackerReact/client/src/Auth/Auth.js"],"names":["React","Component","GoogleButton","GoogleLogin","GoogleLogout","withRouter","CLIENT_ID","Auth","props","state","isLogined","email","undefined","login","bind","handleLoginFailure","logout","handleLogoutFailure","response","accessToken","setState","profileObj","console","log","data","fetch","crossDomain","mode","method","headers","body","JSON","stringify","then","json","message","window","alert","setEmail","history","push"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport './Auth.css';\nimport GoogleButton from 'react-google-button';\n\nimport { GoogleLogin, GoogleLogout } from 'react-google-login';\n\nimport { withRouter } from 'react-router-dom';\n\n// refresh token\n//import { refreshTokenSetup } from '../utils/refreshToken';\n\n\n  const CLIENT_ID = '931153056282-750tm4j5ehreopjf5db02huk0v4gg3ac.apps.googleusercontent.com'; \n\nclass Auth extends Component {\n   constructor(props) {\n    super(props);\n\n    this.state = {\n      isLogined: false,\n      email: undefined\n    };\n\n    this.login = this.login.bind(this);\n    this.handleLoginFailure = this.handleLoginFailure.bind(this);\n    this.logout = this.logout.bind(this);\n    this.handleLogoutFailure = this.handleLogoutFailure.bind(this);\n  }\n\n  login (response) {\n    if(response.accessToken){\n      this.setState(state => ({\n        isLogined: true,\n        email: response.profileObj.email\n      }));\n    }\n    console.log(response.profileObj.email);\n    const data = {email: response.profileObj.email}\n    fetch('http://127.0.0.1:5000/api/google', {\n        crossDomain: true,\n        mode: 'cors',\n        method: 'POST',\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json'\n        },\n        body: JSON.stringify(data),\n        })\n        .then(response => response.json())\n        .then(data => {\n        console.log('Success', data);\n        if (data.message === true){ \n            window.alert(\"Failed Creating your account \");\n        } else{\n        this.props.setEmail(this.state.email) \n        this.props.history.push('/email');\n        }\n        })\n  }\n\n  logout (response) {\n    this.setState(state => ({\n      isLogined: false,\n      email: undefined\n    }));\n  }\n\n  handleLoginFailure (response) {\n    alert('Failed to log in')\n  }\n\n  handleLogoutFailure (response) {\n    alert('Failed to log out')\n  }\n\n  render() {\n    return (\n    <div>\n      { this.state.isLogined ?\n        <GoogleLogout\n          clientId={ CLIENT_ID }\n          buttonText='Logout'\n          onLogoutSuccess={ this.logout }\n          onFailure={ this.handleLogoutFailure }\n        >\n        </GoogleLogout>: <GoogleLogin\n          clientId={ CLIENT_ID }\n          buttonText='Login'\n          onSuccess={ this.login }\n          onFailure={ this.handleLoginFailure }\n          cookiePolicy={ 'single_host_origin' }\n          responseType='code,token'\n        />\n      }\n{ this.state.email ? <h5>Your Email is:  <br/><br/> { this.state.email } <br/><br/> Your password is: <br/><br/> google</h5> : null }\n    </div>\n    )\n  }\n}\nexport default withRouter (Auth);\n"]},"metadata":{},"sourceType":"module"}